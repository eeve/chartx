define("chartx/chart/line/graphs",["canvax/index","canvax/shape/Rect","chartx/utils/tools","chartx/chart/line/group"],function(a,b,c,d){var e=function(a,b){this.w=0,this.h=0,this.y=0,this.opt=a,this.root=b,this.ctx=b.stage.context2D,this.field=null,this._yAxisFieldsMap={},this._setyAxisFieldsMap(),this.data=[],this.disX=0,this.groups=[],this.iGroup=0,this.iNode=-1,this.sprite=null,this.induce=null,this.eventEnabled=a.eventEnabled||!0,this.init(a)};return e.prototype={init:function(b){this.opt=b,this.sprite=new a.Display.Sprite},setX:function(a){this.sprite.context.x=a},setY:function(a){this.sprite.context.y=a},getX:function(){return this.sprite.context.x},getY:function(){return this.sprite.context.y},draw:function(a){_.deepExtend(this,a),this._widget(a);var b=this;_.each(this.groups,function(a){b._yAxisFieldsMap[a.field].line=a.line})},resetData:function(a,b){var c=this;c.data=a,b&&_.deepExtend(c,b);for(var d=0,e=c.data.length;e>d;d++){var f=c.groups[d];f.resetData({data:c.data[d]})}},grow:function(a){_.each(this.groups,function(b,c){b._grow(a)})},_setyAxisFieldsMap:function(){var a=this;_.each(_.flatten(this._getYaxisField()),function(b,c){a._yAxisFieldsMap[b]={ind:c}})},_getYaxisField:function(a){return this.field?this.field:(this.root.type&&this.root.type.indexOf("line")>=0?this.field=this.root._lineChart.dataFrame.yAxis.field:this.field=this.root.dataFrame.yAxis.field,this.field)},add:function(a,b){var c=this;_.deepExtend(this,a);var e=new d(b,c._yAxisFieldsMap[b]._groupInd,c.opt,c.ctx,c._yAxisFieldsMap[b]._sort,c._yAxisFieldsMap[b]._yAxis,c.h,c.w),f=_.indexOf(c.field,b);e.draw({data:c.data[f]}),c.sprite.addChildAt(e.sprite,f),c.groups.splice(f,0,e),_.each(this.groups,function(a,b){a.update({data:c.data[b]})})},remove:function(a){var b=this.groups.splice(a,1)[0];b.destroy()},update:function(a){_.deepExtend(this,a);var b=this;_.each(this.groups,function(a,c){a.update({data:b.data[c]})})},_setGroupsForYfield:function(a,b,c){for(var e=this,f=0,g=a.length;g>f;f++){var h=e.root._yAxis.sort,i=e.root.biaxial,j=e.root._yAxis,k=c||0===c?c:f;if(_.isArray(a[f]))e._setGroupsForYfield(a[f],b[f],f);else{_.isArray(h)&&(h=h[k]||"asc"),i&&k>0&&(j=e.root._yAxisR);var l=e._yAxisFieldsMap[a[f]];l._yAxis=j,l._sort=h,l._groupInd=k;var m=new d(a[f],k,e.opt,e.ctx,h,j,e.h,e.w);m.draw({data:b[f]}),e.sprite.addChild(m.sprite),e.groups.push(m)}}},_widget:function(a){var c=this;c.eventEnabled&&(c._setGroupsForYfield(c._getYaxisField(),c.data),c.induce=new b({id:"induce",context:{y:-c.h,width:c.w,height:c.h,fillStyle:"#000000",globalAlpha:0,cursor:"pointer"}}),c.sprite.addChild(c.induce),c.induce.on("panstart mouseover",function(a){a.eventInfo=c._getInfoHandler(a)}),c.induce.on("panmove mousemove",function(a){a.eventInfo=c._getInfoHandler(a)}),c.induce.on("panend mouseout",function(a){a.eventInfo=c._getInfoHandler(a),c.iGroup=0,c.iNode=-1}),c.induce.on("tap click",function(a){a.eventInfo=c._getInfoHandler(a)}))},_getInfoHandler:function(a){var b=a.point.x,d=a.point.y-this.h;b=b>this.w?this.w:b;for(var e=0==this.disX?0:parseInt((b+this.disX/2)/this.disX),f=[],g=0,h=this.groups.length;h>g;g++){var i=this.groups[g].getNodeInfoAt(e);i&&f.push(i)}var j=c.getDisMinATArr(d,_.pluck(f,"y"));this.iGroup=j,this.iNode=e;var k={iGroup:this.iGroup,iNode:this.iNode,nodesInfoList:_.clone(f)};return k}},e});