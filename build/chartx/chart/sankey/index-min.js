define("chartx/chart/sankey/index",["chartx/chart/index","chartx/layout/sankey/index","canvax/shape/Rect","canvax/shape/Path"],function(a,b,c,d){var e=a.Canvax,f=a.extend({init:function(a,b,c){this._el=a,this._data=b,this._opts=c},draw:function(){this.layoutData=this.getLayoutData(),this._setStages(),this.drawNodes(),this.drawLinks()},_setStages:function(){this._links=new e.Display.Sprite({id:"links",context:{x:this.padding.left,y:this.padding.top}}),this._nodes=new e.Display.Sprite({id:"nodes",context:{x:this.padding.left,y:this.padding.top}}),this._tips=new e.Display.Sprite({id:"tip"}),this.stage.addChild(this._links),this.stage.addChild(this._nodes),this.stage.addChild(this._tips)},getLayoutData:function(){return b().nodeWidth(15).nodePadding(10).size([this.width-this.padding.left-this.padding.right,this.height-this.padding.top-this.padding.bottom]).nodes(this._data.nodes).links(this._data.links).layout(32)},drawNodes:function(){var a=this.layoutData.nodes(),b=this;_.each(a,function(a){var d="red";"Nuclear"==a.name&&(d="green");var e=new c({xyToInt:!1,context:{x:a.x,y:a.y,width:b.layoutData.nodeWidth(),height:Math.max(a.dy,1),fillStyle:d,lineWidth:0,strokeStyle:d}});e.layoutData=a,e.on("click",function(){}),b._nodes.addChild(e)})},drawLinks:function(){var a=this.layoutData.links(),b=this;_.each(a,function(a){var c=b.layoutData.link()(a),e=new d({xyToInt:!1,context:{path:c,strokeStyle:"blue",lineWidth:Math.max(1,a.dy),globalAlpha:.2,cursor:"pointer"}});e.hover(function(){this.context.globalAlpha+=.2},function(){this.context.globalAlpha-=.2}),b._links.addChild(e)})}});return f});