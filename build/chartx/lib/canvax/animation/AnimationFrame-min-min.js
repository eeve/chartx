define("canvax/animation/AnimationFrame",["canvax/animation/Tween"],function(a){function b(a){return a?(i.push(a),j||(j=requestAnimationFrame(function(){var a=i;for(i=[],j=null;a.length>0;)a.shift()()})),j):void 0}function c(a){for(var b=0,c=i.length;c>b;b++)i[b]===a&&i.splice(b,1);return 0==i.length&&(cancelAnimationFrame(j),j=null),j}function d(d){function e(){g&&(a.update(),b(e))}var f=_.extend({from:null,to:null,duration:500,onUpdate:function(){},onComplete:function(){},repeat:0,delay:0,easing:null},d),g={};return f.from&&f.to&&(g=new a.Tween(f.from).to(f.to,f.duration).onUpdate(f.onUpdate),f.repeat&&g.repeat(f.repeat),f.delay&&g.delay(f.delay),f.easing&&g.easing(a.Easing[f.easing.split(".")[0]][f.easing.split(".")[1]]),g.onComplete(function(){c(e),g.stop(),a.remove(g),g=null,e=null,f.onComplete()}),g.start(),e(),g._animate=e),g}function e(b){b.stop(),a.remove(b),c(b._animate),b=null}for(var f=0,g=["ms","moz","webkit","o"],h=0;h<g.length&&!window.requestAnimationFrame;++h)window.requestAnimationFrame=window[g[h]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[g[h]+"CancelAnimationFrame"]||window[g[h]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){var c=(new Date).getTime(),d=Math.max(0,16-(c-f)),e=window.setTimeout(function(){a(c+d)},d);return f=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var i=[],j=null;return{registFrame:b,destroyFrame:c,registTween:d,destroyTween:e}});