define("chartx/components/datazoom/index",["canvax/index","canvax/shape/Rect"],function(a,b){var c=function(a){this.range={start:0,end:1},this.count=1,this.pos={x:0,y:0},this.w=0,this.h=c.height,this.color="#70aae8",this.bg={fillStyle:"#999",strokeStyle:"#999",lineWidth:0},this.dragIng=function(){},this.dragEnd=function(){},a&&_.deepExtend(this,a),this.barH=this.h-6,this.barY=3,this.btnW=8,this.btnFillStyle=this.color,this.btnLeft=null,this.btnRgiht=null,this.init()};return c.prototype={init:function(){var b=this;this.sprite=new a.Display.Sprite({id:"dataZoom",context:{x:this.pos.x,y:this.pos.y}}),this.dataZoomBg=new a.Display.Sprite({id:"dataZoomBg"}),this.dataZoomBtns=new a.Display.Sprite({id:"dataZoomBtns"}),this.sprite.addChild(this.dataZoomBg),this.sprite.addChild(this.dataZoomBtns),b.widget()},widget:function(){var c=new b({context:{x:0,y:this.barY,width:this.w,height:this.barH,lineWidth:this.bg.lineWidth,strokeStyle:this.bg.strokeStyle,fillStyle:this.bg.fillStyle,globalAlpha:.05}}),d=this;this.sprite.addChild(c),this.btnsLeft=new a.Display.Sprite({}),this.btnLeft=new b({dragEnabled:!0,context:{x:this.range.start/this.count*this.w,y:this.barY+1,width:this.btnW,height:this.barH-1,fillStyle:this.btnFillStyle,cursor:"move"}}),this.btnLeft.on("draging",function(){this.context.y=d.barY+1,this.context.x<0&&(this.context.x=0),this.context.x>d.btnRight.context.x-d.btnW-2&&(this.context.x=d.btnRight.context.x-d.btnW-2),d.rangeRect.context.width=d.btnRight.context.x-this.context.x-d.btnW,d.rangeRect.context.x=this.context.x+d.btnW,d.setRange()}),this.btnLeft.on("dragend",function(){d.dragEnd(d.range)}),this.btnRight=new b({dragEnabled:!0,context:{x:this.range.end/this.count*this.w-this.btnW,y:this.barY+1,width:this.btnW,height:this.barH-1,fillStyle:this.btnFillStyle,cursor:"move"}}),this.btnRight.on("draging",function(){this.context.y=d.barY+1,this.context.x<d.btnLeft.context.x+d.btnW+2&&(this.context.x=d.btnLeft.context.x+d.btnW+2),this.context.x>d.w-d.btnW&&(this.context.x=d.w-d.btnW),d.rangeRect.context.width=this.context.x-d.btnLeft.context.x-d.btnW,d.setRange()}),this.btnRight.on("dragend",function(){d.dragEnd(d.range)}),this.rangeRect=new b({dragEnabled:!0,context:{x:this.btnLeft.context.x+d.btnW,y:this.barY+1,width:this.btnRight.context.x-this.btnLeft.context.x-d.btnW,height:this.barH-1,fillStyle:this.btnFillStyle,globalAlpha:.3,cursor:"move"}}),this.rangeRect.on("draging",function(a){this.context.y=d.barY+1,this.context.x<d.btnW&&(this.context.x=d.btnW),this.context.x>d.w-this.context.width-d.btnW&&(this.context.x=d.w-this.context.width-d.btnW),d.btnLeft.context.x=this.context.x-d.btnW,d.btnRight.context.x=this.context.x+this.context.width,d.setRange()}),this.rangeRect.on("dragend",function(){d.dragEnd(d.range)}),this.dataZoomBtns.addChild(this.rangeRect),this.dataZoomBtns.addChild(this.btnLeft),this.dataZoomBtns.addChild(this.btnRight)},setRange:function(){var a=this.btnLeft.context.x/this.w*this.count,b=(this.btnRight.context.x+this.btnW)/this.w*this.count;this.range.start=a,this.range.end=b,this.dragIng(this.range)}},c.height=46,c});